@model IEnumerable<HumanResourcesManager.BLL.DTOs.EmployeeDTO>

@{
    ViewData["Title"] = "Employee Management";
}

<h2>Employee Management</h2>

<table class="table table-bordered">
    <thead class="table-dark">
        <tr>
            <th>Code</th>
            <th>Name</th>
            <th>Email</th>
            <th>Department</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var e in Model)
        {
            <tr>
                <td>@e.EmployeeCode</td>
                <td>@e.FullName</td>
                <td>@e.Email</td>
                <td>@e.DepartmentName</td>
                <td>
                    <button class="btn btn-info btn-sm"
                            data-bs-toggle="modal"
                            data-bs-target="#detailModal"
                            onclick="showDetail('@e.EmployeeCode','@e.FullName','@e.Email','@e.Phone','@e.Address')">
                        Detail
                    </button>

                    <button class="btn btn-warning btn-sm"
                            data-bs-toggle="modal"
                            data-bs-target="#editModal"
                            onclick="showEdit('@e.EmployeeId','@e.FullName','@e.Email','@e.Phone','@e.Address')">
                        Edit
                    </button>
                </td>
            </tr>
        }
    </tbody>
</table>

<!-- ================= DETAIL MODAL ================= -->
<div class="modal fade" id="detailModal">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title">Employee Detail</h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">
                <p><b>Code:</b> <span id="d_code"></span></p>
                <p><b>Name:</b> <span id="d_name"></span></p>
                <p><b>Email:</b> <span id="d_email"></span></p>
                <p><b>Phone:</b> <span id="d_phone"></span></p>
                <p><b>Address:</b> <span id="d_address"></span></p>
            </div>

        </div>
    </div>
</div>

<!-- ================= EDIT MODAL ================= -->
<div class="modal fade" id="editModal">
    <div class="modal-dialog">
        <div class="modal-content">

            <form asp-action="Edit" asp-controller="Employee" method="post">
                @Html.AntiForgeryToken()

                <div class="modal-header">
                    <h5 class="modal-title">Edit Employee</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                    <input type="hidden" name="EmployeeId" id="e_id" />

                    <div class="mb-2">
                        <label>Name</label>
                        <input name="FullName" id="e_name" class="form-control" />
                    </div>

                    <div class="mb-2">
                        <label>Email</label>
                        <input name="Email" id="e_email" class="form-control" />
                    </div>

                    <div class="mb-2">
                        <label>Phone</label>
                        <input name="Phone" id="e_phone" class="form-control" />
                    </div>

                    <div class="mb-2">
                        <label>Address</label>
                        <input name="Address" id="e_address" class="form-control" />
                    </div>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-success" type="submit">Save</button>
                    <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                </div>

            </form>

        </div>
    </div>
</div>

<script>
    function showDetail(code, name, email, phone, address) {
        document.getElementById("d_code").innerText = code;
        document.getElementById("d_name").innerText = name;
        document.getElementById("d_email").innerText = email;
        document.getElementById("d_phone").innerText = phone;
        document.getElementById("d_address").innerText = address;
    }

    function showEdit(id, name, email, phone, address) {
        document.getElementById("e_id").value = id;
        document.getElementById("e_name").value = name;
        document.getElementById("e_email").value = email;
        document.getElementById("e_phone").value = phone;
        document.getElementById("e_address").value = address;
    }
</script>
