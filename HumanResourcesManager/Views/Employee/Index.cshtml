@model HumanResourcesManager.BLL.DTOs.EmployeeResponseDTO

@{
	Layout = "~/Views/Employee/_EmployeeLayout.cshtml";
}

<!-- Main Content -->
<main class="flex-1 overflow-y-auto bg-slate-50/50">
	@await Html.PartialAsync("_EmployeeHeader")

	<div class="p-5 lg:p-8">
		@await Html.PartialAsync("_EmployeeStats")

		<!-- Tabs Content -->
		<div class="bg-white rounded-2xl shadow-sm border border-slate-200/60 overflow-hidden">
			<!-- Attendance Tab -->
			<div id="attendanceTab" class="tab-content">
				<div class="px-6 py-5 border-b border-slate-100 bg-slate-50/50">
					<h2 class="text-lg font-semibold text-slate-800">Chấm Công</h2>
				</div>
				<div class="p-6">
					<!-- Check In/Out Section -->
					<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
						<div class="bg-gradient-to-br from-blue-50 to-indigo-50/80 rounded-2xl p-6 border border-blue-100">
							<h3 class="text-base font-semibold text-slate-800 mb-4">📸 Chấm Công Vào</h3>
							<div id="checkInArea">
								<video id="checkInVideo" class="w-full rounded-lg mb-4 hidden" autoplay></video>
								<canvas id="checkInCanvas" class="hidden"></canvas>
								<div id="checkInPhotoPreview" class="hidden mb-4">
									<img id="checkInPhotoImg" class="w-full rounded-lg">
								</div>
								<button id="startCheckInCameraBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-xl transition-colors mb-2 shadow-sm">
									📷 Bật Camera
								</button>
								<button id="captureCheckInBtn" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-medium py-3 rounded-xl transition-colors hidden">
									✓ Chụp Ảnh
								</button>
								<button id="submitCheckInBtn" class="w-full bg-violet-600 hover:bg-violet-700 text-white font-medium py-3 rounded-xl transition-colors hidden">
									✓ Xác Nhận Check In
								</button>
							</div>
							<p class="text-sm text-slate-600 mt-3" id="checkInStatus">Chưa check-in hôm nay</p>
						</div>

						<div class="bg-gradient-to-br from-amber-50 to-orange-50/80 rounded-2xl p-6 border border-amber-100">
							<h3 class="text-base font-semibold text-slate-800 mb-4">📸 Chấm Công Ra</h3>
							<div id="checkOutArea">
								<video id="checkOutVideo" class="w-full rounded-lg mb-4 hidden" autoplay></video>
								<canvas id="checkOutCanvas" class="hidden"></canvas>
								<div id="checkOutPhotoPreview" class="hidden mb-4">
									<img id="checkOutPhotoImg" class="w-full rounded-lg">
								</div>
								<button id="startCheckOutCameraBtn" class="w-full bg-amber-600 hover:bg-amber-700 text-white font-medium py-3 rounded-xl transition-colors mb-2 shadow-sm">
									📷 Bật Camera
								</button>
								<button id="captureCheckOutBtn" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-medium py-3 rounded-xl transition-colors hidden">
									✓ Chụp Ảnh
								</button>
								<button id="submitCheckOutBtn" class="w-full bg-violet-600 hover:bg-violet-700 text-white font-medium py-3 rounded-xl transition-colors hidden">
									✓ Xác Nhận Check Out
								</button>
							</div>
							<p class="text-sm text-slate-600 mt-3" id="checkOutStatus">Chưa check-out hôm nay</p>
						</div>
					</div>

					<!-- Attendance History -->
					<div>
						<h3 class="text-base font-semibold text-slate-800 mb-3">Lịch Sử Chấm Công</h3>
						<div class="overflow-x-auto rounded-xl border border-slate-200/80">
							<table class="employee-table w-full">
								<thead>
									<tr class="bg-slate-50 border-b border-slate-200">
										<th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Ngày</th>
										<th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Check In</th>
										<th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Check Out</th>
										<th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Đi Muộn</th>
										<th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Thời gian về sớm</th>
										<th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Tăng Ca</th>
									</tr>
								</thead>
								<tbody id="attendanceTableBody"></tbody>
							</table>
						</div>
						<div id="attendancePagination" class="pagination mt-6"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</main>